{"title":"SQL获取磁盘空间大小","slug":"SQL获取磁盘空间大小","date":"2018-01-16T14:11:41.000Z","updated":"2018-01-16T15:00:28.000Z","comments":true,"path":"api/articles/SQL获取磁盘空间大小.json","photos":[],"link":"","excerpt":null,"covers":null,"content":"<h1 id=\"获取所有库磁盘使用空间大小\"><a href=\"#获取所有库磁盘使用空间大小\" class=\"headerlink\" title=\"获取所有库磁盘使用空间大小\"></a>获取所有库磁盘使用空间大小</h1><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> TABLE_SCHEMA, <span class=\"keyword\">concat</span>(<span class=\"keyword\">truncate</span>(<span class=\"keyword\">sum</span>(data_length)/<span class=\"number\">1024</span>/<span class=\"number\">1024</span>,<span class=\"number\">2</span>),<span class=\"string\">' MB'</span>) <span class=\"keyword\">as</span> data_size,</span><br><span class=\"line\"><span class=\"keyword\">concat</span>(<span class=\"keyword\">truncate</span>(<span class=\"keyword\">sum</span>(index_length)/<span class=\"number\">1024</span>/<span class=\"number\">1024</span>,<span class=\"number\">2</span>),<span class=\"string\">'MB'</span>) <span class=\"keyword\">as</span> index_size</span><br><span class=\"line\"><span class=\"keyword\">from</span> information_schema.tables</span><br><span class=\"line\"><span class=\"keyword\">group</span> <span class=\"keyword\">by</span> TABLE_SCHEMA</span><br><span class=\"line\"><span class=\"keyword\">order</span> <span class=\"keyword\">by</span> data_length <span class=\"keyword\">desc</span>;</span><br></pre></td></tr></table></figure>\n<h1 id=\"获取单个库磁盘使用空间大小\"><a href=\"#获取单个库磁盘使用空间大小\" class=\"headerlink\" title=\"获取单个库磁盘使用空间大小\"></a>获取单个库磁盘使用空间大小</h1><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> TABLE_NAME, <span class=\"keyword\">concat</span>(<span class=\"keyword\">truncate</span>(data_length/<span class=\"number\">1024</span>/<span class=\"number\">1024</span>,<span class=\"number\">2</span>),<span class=\"string\">' MB'</span>) <span class=\"keyword\">as</span> data_size,</span><br><span class=\"line\"><span class=\"keyword\">concat</span>(<span class=\"keyword\">truncate</span>(index_length/<span class=\"number\">1024</span>/<span class=\"number\">1024</span>,<span class=\"number\">2</span>),<span class=\"string\">' MB'</span>) <span class=\"keyword\">as</span> index_size</span><br><span class=\"line\"><span class=\"keyword\">from</span> information_schema.tables <span class=\"keyword\">where</span> TABLE_SCHEMA = <span class=\"string\">'TestDB'</span></span><br><span class=\"line\"><span class=\"keyword\">group</span> <span class=\"keyword\">by</span> TABLE_NAME</span><br><span class=\"line\"><span class=\"keyword\">order</span> <span class=\"keyword\">by</span> data_length <span class=\"keyword\">desc</span>;</span><br></pre></td></tr></table></figure>","categories":[],"tags":[]}